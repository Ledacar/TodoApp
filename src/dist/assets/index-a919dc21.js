var L=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)};var r=(i,e,s)=>(L(i,e,"read from private field"),s?s.call(i):e.get(i)),_=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},h=(i,e,s,t)=>(L(i,e,"write to private field"),t?t.call(i,s):e.set(i,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function t(a){if(a.ep)return;a.ep=!0;const d=s(a);fetch(a.href,d)}})();let p;const S=new Uint8Array(16);function D(){if(!p&&(p=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!p))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return p(S)}const o=[];for(let i=0;i<256;++i)o.push((i+256).toString(16).slice(1));function A(i,e=0){return(o[i[e+0]]+o[i[e+1]]+o[i[e+2]]+o[i[e+3]]+"-"+o[i[e+4]]+o[i[e+5]]+"-"+o[i[e+6]]+o[i[e+7]]+"-"+o[i[e+8]]+o[i[e+9]]+"-"+o[i[e+10]]+o[i[e+11]]+o[i[e+12]]+o[i[e+13]]+o[i[e+14]]+o[i[e+15]]).toLowerCase()}const x=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),v={randomUUID:x};function m(i,e,s){if(v.randomUUID&&!e&&!i)return v.randomUUID();i=i||{};const t=i.random||(i.rng||D)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){s=s||0;for(let a=0;a<16;++a)e[s+a]=t[a];return e}return A(t)}const w=[{id:m(),content:"Complete Todo App on Frontend Mentor",checked:!1},{id:m(),content:"Pick up groceries",checked:!1},{id:m(),content:"Read for 1 hour",checked:!1},{id:m(),content:"10 minutes meditation",checked:!1},{id:m(),content:"Jog around the park 3x",checked:!1},{id:m(),content:"Complete online JavaScript course",checked:!0}],C=document.head.querySelector("link[rel=stylesheet]"),O=document.querySelector(".header__theme-toggle"),I=document.querySelector(".header__form"),f=document.querySelector(".header__input"),c=document.querySelector(".tasks__list"),T=document.querySelector(".tasks__footer"),y=document.querySelector(".tasks__filter"),q=document.querySelector(".tasks__amount"),E=document.querySelector(".task__instruction");class b{constructor(e,s="",t=!1){this.content=e,this.id=s===""?(Date.now()+"").slice(-10):s,this.checked=t}changeChecked(){this.checked=!this.checked}}var l,n,k,g;class U{constructor(){_(this,l,void 0);_(this,n,[]);_(this,k,null);_(this,g,0);const e=document.createElement("link");e.rel="stylesheet",e.href="./dark-theme.css",e.media="(prefers-color-scheme: dark)",C.after(e),this._getColorTheme(),this._getTasks(),O.addEventListener("click",this._changeColorTheme.bind(this)),I.addEventListener("submit",this._newTask.bind(this)),c.addEventListener("change",this._checkTask.bind(this)),c.addEventListener("click",this._deleteTask.bind(this)),T.addEventListener("click",this._deleteCompleted.bind(this)),y.addEventListener("change",this._filterTasks.bind(this))}_getColorTheme(){const e=localStorage.getItem("color-theme");h(this,l,e||"auto"),this._applyColorTheme()}_setСolorTheme(){localStorage.setItem("color-theme",r(this,l))}_applyColorTheme(){const e={auto:"(prefers-color-scheme: dark)",light:"not all",dark:"all"},s=document.head.querySelector('link[rel=stylesheet][href$="dark-theme.css"]');s.media=e[r(this,l)]}_changeColorTheme(){const e={auto:window.matchMedia("(prefers-color-scheme: dark)").matches?"light":"dark",light:"dark",dark:"light"};h(this,l,r(this,l)==="auto"?e.auto:e[r(this,l)]),this._setСolorTheme(),this._applyColorTheme()}_getTasks(){let e=JSON.parse(localStorage.getItem("tasks"));e||(e=w),e.forEach((s,t)=>{const a=new b(s.content,s.id,s.checked);r(this,n).push(a),this._renderTask(a,t)}),this._setTasks(),this._toggleFilter(),this._renderActiveAmount()}_setTasks(){localStorage.setItem("tasks",JSON.stringify(r(this,n)))}_renderTask(e,s){const t=document.createElement("li");t.classList.add("tasks__item"),t.draggable=!0,t.dataset.order=s,t.innerHTML=`
      <input class="tasks__input" type="checkbox" name="task-item" id="${e.id}" ${e.checked?"checked":""}>
      <label class="tasks__text" for="${e.id}" tabindex="0">${e.content}</label>
      <button class="tasks__delete" type="button">
        <span class="visually-hidden">Delete task</span>
      </button>
    `,c.prepend(t),t.addEventListener("dragstart",this._handleDragStart.bind(this)),t.addEventListener("dragend",this._handleDragEnd.bind(this)),t.addEventListener("dragover",this._handleDragOver.bind(this)),t.addEventListener("dragleave",this._handleDragLeave.bind(this)),t.addEventListener("drop",this._handleDragDrop.bind(this))}_toggleFilter(){r(this,n).length===0?(T.classList.add("tasks__footer--hidden"),y.classList.add("filter--hidden"),E.classList.add("task__instruction--hidden")):(T.classList.remove("tasks__footer--hidden"),y.classList.remove("filter--hidden"),E.classList.remove("task__instruction--hidden"))}_renderActiveAmount(){let e=0;r(this,n).forEach(s=>{s.checked||e++}),q.textContent=`${e} items left`}_filterTasks(e){const s=e.target.value;if(c.innerHTML="",s==="completed")for(let t=0;t<r(this,n).length;t++)r(this,n)[t].checked&&this._renderTask(r(this,n)[t],t);else if(s==="active")for(let t=0;t<r(this,n).length;t++)r(this,n)[t].checked||this._renderTask(r(this,n)[t],t);else for(let t=0;t<r(this,n).length;t++)this._renderTask(r(this,n)[t],t)}_newTask(e){if(e.preventDefault(),f.value.trim().length>0){const s=new b(f.value,m(),!1);r(this,n).push(s),this._renderTask(s)}f.value="",this._setTasks(),this._toggleFilter(),this._renderActiveAmount()}_checkTask(e){const s=e.target.closest("[id]");for(let t=0;t<r(this,n).length;t++)if(r(this,n)[t].id===s.getAttribute("id")){r(this,n)[t].checked=!r(this,n)[t].checked;break}this._setTasks(),this._toggleFilter(),this._renderActiveAmount()}_deleteTask(e){const t=e.target.closest(".tasks__delete").closest("li"),a=t.dataset.order;a!==-1&&h(this,n,r(this,n).filter((d,u)=>u!==parseInt(a))),t.remove(),this._setTasks(),this._toggleFilter(),this._renderActiveAmount()}_deleteCompleted(e){h(this,n,r(this,n).filter(s=>!s.checked)),c.innerHTML="",r(this,n).forEach((s,t)=>this._renderTask(s,t)),this._setTasks()}_handleDragStart(e){h(this,k,e.target.dataset.order),h(this,g,e.target.offsetHeight),c.style.height=c.offsetHeight+"px",setTimeout(()=>{e.target.style.display="none"},0),c.style.height=c.offsetHeight-r(this,g)+"px"}_handleDragEnd(e){e.target.style.display="flex",c.style.height=c.offsetHeight+r(this,g)+"px"}_handleDragOver(e){e.preventDefault(),e.target.parentElement.classList.contains("tasks__item")&&e.target.parentElement.classList.add("tasks__item--dragged-over"),e.target.classList.contains("tasks__item")&&e.target.classList.add("tasks__item--dragged-over")}_handleDragLeave(e){e.target.parentElement.classList.contains("tasks__item")&&e.target.parentElement.classList.remove("tasks__item--dragged-over"),e.target.classList.contains("tasks__item")&&e.target.classList.remove("tasks__item--dragged-over")}_handleDragDrop(e){if(this._handleDragLeave(e),e.target.parentElement.classList.contains("tasks__item")){const s=e.target.parentElement.dataset.order;this._changeTasksOrder(s)}}_changeTasksOrder(e){const s=r(this,k),t=r(this,n)[s];r(this,n).splice(s,1),r(this,n).splice(e,0,t),c.innerHTML="",r(this,n).forEach((a,d)=>this._renderTask(a,d)),this._setTasks()}}l=new WeakMap,n=new WeakMap,k=new WeakMap,g=new WeakMap;new U;
